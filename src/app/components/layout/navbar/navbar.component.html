<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <a routerLink="/" class="brand-link">
      <span class="logo-urban">Urban</span><span class="logo-food">Food</span>
      <i class="fas fa-utensils logo-icon"></i>
    </a>
    
    <!-- Search Bar -->
    <div class="search-container">
      <input 
        type="text" 
        [(ngModel)]="searchQuery" 
        (keyup.enter)="onSearch()"
        placeholder="Search for food, restaurants..."
        class="search-input"
      >
      <div class="image-search-wrapper">
        <button class="additional-search-btn" (click)="toggleImageSearch($event)">
          <i class="fas fa-camera"></i>
        </button>
        <div class="modal-overlay" *ngIf="showImageSearchModal" (click)="toggleImageSearch($event)"></div>
        <div class="image-search-modal" *ngIf="showImageSearchModal">
          <div class="modal-header">
            <span>Search by image</span>
            <button class="close-btn" (click)="toggleImageSearch($event)"><i class="fas fa-times"></i></button>
          </div>
          <p class="modal-subtitle">Find what you love with better prices on UrbanFood by using an image search</p>
          <div class="upload-area">
            <div class="upload-placeholder">
              <i class="far fa-image"></i>
              <p>Drag an image here</p>
              <span>or</span>
              <button class="upload-btn" (click)="triggerFileInput()">Upload a photo</button>
              <input type="file" #fileInput style="display: none" accept="image/*" (change)="handleFileUpload($event)">
            </div>
          </div>
          <p class="shortcut-hint">*For a quick search hit CTRL+V to paste an image into the search box</p>
        </div>
      </div>
      <button class="search-btn" (click)="onSearch()">
        <i class="fas fa-search"></i>
      </button>
    </div>
    
    <!-- Language Selector -->
    <div class="language-selector" (click)="toggleLanguageDropdown($event)">
      <img src="assets/icons/{{ selectedLanguage === 'English' ? 'usa flag.webp' : 'Flag-of-Sri-Lanka.webp' }}" alt="{{ selectedLanguage }}" class="flag-icon">
      <span>{{ selectedLanguage }}</span>
      <i class="fas fa-chevron-down"></i>
      <div class="language-dropdown" *ngIf="showLanguageDropdown">
        <div class="dropdown-item" (click)="selectLanguage('English', $event)">
          <img src="assets/icons/usa flag.webp" alt="English" class="flag-icon">
          <span>English (USA)</span>
        </div>
        <div class="dropdown-item" (click)="selectLanguage('සිංහල', $event)">
          <img src="assets/icons/Flag-of-Sri-Lanka.webp" alt="Sinhala" class="flag-icon">
          <span>සිංහල (Sri Lanka)</span>
        </div>
      </div>
    </div>
    
    <!-- User Section -->
    <div class="user-section">
      <ng-container *ngIf="isLoggedIn; else authButtons">
        <div class="user-menu">
          <i class="fas fa-user"></i>
          <span>Welcome</span>
          <button class="account-btn" (click)="navigateToProfile()">
            My Account <i class="fas fa-chevron-down"></i>
          </button>
        </div>
      </ng-container>
      <ng-template #authButtons>
        <div class="user-menu">
          <i class="fas fa-user"></i>
          <span>Welcome</span>
          <button class="account-btn" (click)="showAuthDropdown = !showAuthDropdown">
            Sign in / Register <i class="fas fa-chevron-down"></i>
          </button>
          <div class="auth-dropdown" *ngIf="showAuthDropdown">
            <button class="dropdown-btn login-btn" (click)="login()">Login</button>
            <button class="dropdown-btn signup-btn" (click)="signup()">Sign Up</button>
          </div>
        </div>
      </ng-template>
    </div>
    
    <!-- Cart -->
    <div class="cart-container" (click)="navigateToCart()">
      <div class="cart-icon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" *ngIf="cartItemCount > 0">{{cartItemCount}}</span>
      </div>
      <span class="cart-text">Cart</span>
    </div>
  </div>
</nav>

<app-store-details-modal 
  *ngIf="showModal"
  (closeModal)="closeModal()"
  (submitStoreDetails)="onSubmitStoreDetails($event)"
></app-store-details-modal> 